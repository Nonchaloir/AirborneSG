<!DOCTYPE html>
   <html>
      <head>
         <title>Airborne.SG</title>
         <link rel = "stylesheet" href = "http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.css"/>
         <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
         integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
         crossorigin=""/>
          <!-- Make sure you put this AFTER Leaflet's CSS -->
         <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
         integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
         crossorigin=""></script>

         <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=keyboard_double_arrow_right" />
         <script src = "http://cdn.leafletjs.com/leaflet-0.7.3/leaflet.js"></script>
         <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"> </script>
      </head>
   <body>
      <style>

         .button_Panel{
            height:3vh;
            width:3vh;
            border-radius:50%;
         }

         .button_Panel:hover{
            cursor:pointer;
            background-color:grey;
         }


      </style>
      <div class = "wrapper" style = "width:15vw; height:100vh; display:inline-block;">


         <!--Side Panel on the LEFT-->
         <div class = "main">
            <!--Main Panel Content-->
            <div style = "text-align:center;">
               <span style = "text-align:center; font-size:x-large;"><u>Drone Query</u></span>
            </div>

            <!--5km Aerodrome Button-->
            <div style = "display:inline-block; width:100%; padding-top:0px;margin-bottom:15px;">
               <div style = "display:inline-block; width:10%; vertical-align:middle;">
                  <button class = "button_Panel" id = "5km Aerodrome" onclick = "Off_Layer(id)"></button>
               </div>
               <div style = "display:inline-block; width:85%;vertical-align: middle; margin-left:2px;">
                  <span style = "text-align:left; font-size:large;"><b>Areas within 5km of Aerodrome</b></span>
               </div>
            </div>

            <!--Danger Area Button-->
            <div style = "display:inline-block; width:100%; padding-top:0px; margin-bottom:15px;">
               <div style = "display:inline-block; width:10%; vertical-align:middle;">
                  <button class = "button_Panel" id = "Danger Area" onclick = "Off_Layer(id)"></button>
               </div>
               <div style = "display:inline-block; width:85%;vertical-align: middle;">
                  <span style = "text-align:left; font-size:large;"><b>Areas within Danger Areas</b></span>
               </div>
            </div>

            <!--Prohibited Area Button-->
            <div style = "display:inline-block; width:100%; padding-top:0px; margin-bottom:15px;">
               <div style = "display:inline-block; width:10%; vertical-align:middle;">
                  <button class = "button_Panel" id = "Prohibited Area" onclick = "Off_Layer(id)"></button>
               </div>
               <div style = "display:inline-block; width:85%;vertical-align: middle;">
                  <span style = "text-align:left; font-size:large;"><b>Areas within Prohibited Areas</b></span>
               </div>
            </div>

            <!--Restricted Area-->
            <div style = "display:inline-block; width:100%; padding-top:0px; margin-bottom:15px;">
               <div style = "display:inline-block; width:10%; vertical-align:middle;">
                  <button class = "button_Panel" id = "Restricted Area" onclick = "Off_Layer(id)"></button>
               </div>
               <div style = "display:inline-block; width:85%;vertical-align: middle;">
                  <span style = "text-align:left; font-size:large;"><b>Areas within Restricted Areas</b></span>
               </div>
            </div>

            <!--Protected Area-->
            <div style = "display:inline-block; width:100%; padding-top:0px; margin-bottom:15px;">
               <div style = "display:inline-block; width:10%; vertical-align:middle;">
                  <button class = "button_Panel" id = "Protected Area" onclick = "Off_Layer(id)"></button>
               </div>
               <div style = "display:inline-block; width:85%;vertical-align: middle;">
                  <span style = "text-align:left; font-size:large;"><b>Protected Areas under Air Navigation Act</b></span>
               </div>
            </div>

            <!--ACO TAB-->
            <div style = "display:inline-block; width:100%; padding-top:0px; margin-bottom:15px;">
               <div style = "display:inline-block; width:10%; vertical-align:middle;">
                  <button class = "button_Panel" id = "ACO_TAB" onclick = "Off_Layer(id)"></button>
               </div>
               <div style = "display:inline-block; width:85%;vertical-align: middle;">
                  <span style = "text-align:left; font-size:large;"><b>TAB 10 KM BUBBLE</b></span>
               </div>
            </div>

            <!--ACO PLAB-->
            <div style = "display:inline-block; width:100%; padding-top:0px; margin-bottom:15px;">
               <div style = "display:inline-block; width:10%; vertical-align:middle;">
                  <button class = "button_Panel" id = "ACO_PLAB" onclick = "Off_Layer(id)"></button>
               </div>
               <div style = "display:inline-block; width:85%;vertical-align: middle;">
                  <span style = "text-align:left; font-size:large;"><b>PLAB 5 KM BUBBLE</b></span>
               </div>
            </div>

            <!--ACO UAS--->
            <div style = "display:inline-block; width:100%; padding-top:0px; margin-bottom:15px;">
               <div style = "display:inline-block; width:10%; vertical-align:middle;">
                  <button class = "button_Panel" id = "ACO_UAS"  onclick = "Off_UAS()"></button>
               </div>
               <div style = "display:inline-block; width:85%;vertical-align: middle;">
                  <span style = "text-align:left; font-size:large;"><b>ACO UAS Drones</b></span>
               </div>
            </div>


         </div>
         
      </div>

      <!--Main Interface on the right-->
      <div style = "width: 80vw; height: 100vh; margin:0px; padding:0px; float:right; border-left:1px solid black;">
         <!--Container for Search-->
         <div style = "width:100%; height:4%;">
            <!--Input for searching Coordinates-->
            <input type = "text" id = "Coordinate_Search_Value" style = "height:100%; width:35%;font-size:xx-large;" placeholder = "Search Coordinate Here..."></input>
            <input type = "submit" value = "Search" style = "height:5%; width:10%; position:absolute; margin-left:25px;font-size:x-large;" onclick = "Plot_Coordinate()"></button>
         </div>

         <!--Container for Map-->
         <div id = "map" style = "width:100%; height:93%; bottom:0px; margin-top:15px;"></div>
      </div>


      
   </body>
   <script type="text/javascript" src = "index.js"></script>
   <script src="https://cdn.jsdelivr.net/npm/xlsx/dist/xlsx.full.min.js"></script>
   <script>
      let UAS_Data = [];
      let Show_UAS = false;

      fetch('./X2 System Hotrep Calculator.xlsx')
         .then(res => res.arrayBuffer())
         .then(data => {
            const workbook = XLSX.read(data, { type: 'array' });
            const firstSheet = workbook.Sheets[workbook.SheetNames[0]];
            const jsonData = XLSX.utils.sheet_to_json(firstSheet, { header: 1 });
         
            jsonData.forEach(UAS_Info =>{
               let UAS_Lat = UAS_Info[8];
               let UAS_Long = UAS_Info[9];

               let Value_Type = typeof(UAS_Lat);

               if (Value_Type ==  "number"){
                  //Setup our Drone Icon First
                  var Drone_Icon = L.icon({
                      iconUrl: 'location-pin.png',
                  
                      iconSize:     [40, 40],
                      shadowSize:   [10, 10],
                  
                      iconAnchor:   [10, 30],
                      shadowAnchor: [0, 0],
                      popupAnchor:  [3, -5],
                      map:map
                  });

                  let Coor_Marker = L.marker([UAS_Lat, UAS_Long], {icon: Drone_Icon}, {map: map});
                  UAS_Data.push(Coor_Marker);
                  Coor_Marker.addTo(map);


               }
            })

         });

         let UAS_On = true;

         function Off_UAS(){
            if (UAS_On){
               UAS_On = false;
               UAS_Data.forEach(data =>{
                  data.setOpacity(false);
               })
            }
            else{
               UAS_On = true;
               UAS_Data.forEach(data =>{
                  data.setOpacity(true);
               })
            }
         }

         

         


   </script>

           
</html>